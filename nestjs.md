### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Nest.js –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏**  

1. **–ß–µ—Ç–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ DI**  
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–º–æ–¥—É–ª–∏ –∏ Dependency Injection (DI)**, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ **–≥–∏–±–∫–∏–º** –∏ **—Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–º**.  
   - –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç Express, –≥–¥–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, Nest.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**.  

2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**  
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å **MVC, Hexagonal, CQRS, DDD**.  
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ **–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã** –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **gRPC, Kafka, RabbitMQ** –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.  

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ OpenAPI**  
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `class-validator` –∏ `class-transformer` —É–ø—Ä–æ—â–∞–µ—Ç **–≤–∞–ª–∏–¥–∞—Ü–∏—é DTO**.  
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è **Swagger (OpenAPI)** —á–µ—Ä–µ–∑ `@nestjs/swagger`.  

4. **–ì–∏–±–∫–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞**  
   - –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Express/Fastify**.  
   - –õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å **REST –Ω–∞ GraphQL/WebSockets/gRPC** –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏.  

---

### **–ö–∞–≤–µ—Ä–∑–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –ø–æ Nest.js**  

‚ùì **1. –ö–∞–∫ Nest.js —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∫–∞–∫ –∏—Ö –∏–∑–±–µ–∂–∞—Ç—å?**  
üí° **–û—Ç–≤–µ—Ç:**  
- Nest.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—Ñ–æ—Ä–≤–∞—Ä–¥–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∏** (`forwardRef()`).  
- –¶–∏–∫–ª—ã –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å, **—Ä–∞–∑–±–∏–≤–∞—è –º–æ–¥—É–ª–∏ –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—è **–ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã**.  
üìå **–ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ `forwardRef()`:**  
```typescript
@Module({
  imports: [forwardRef(() => UsersModule)],
})
export class AuthModule {}
```

---

‚ùì **2. –ß–µ–º `Request-scoped` –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç Singleton-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤?**  
üí° **–û—Ç–≤–µ—Ç:**  
- **Singleton (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)** ‚Üí –°–æ–∑–¥–∞–µ—Ç—Å—è **–æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä** –Ω–∞ –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.  
- **Request-scoped** ‚Üí –°–æ–∑–¥–∞–µ—Ç—Å—è **–Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä** –Ω–∞ –∫–∞–∂–¥—ã–π HTTP-–∑–∞–ø—Ä–æ—Å.  
üìå **–ü—Ä–∏–º–µ—Ä request-scoped –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:**  
```typescript
@Injectable({ scope: Scope.REQUEST })
export class RequestScopedService {
  constructor(@Inject(REQUEST) private request: Request) {}
}
```
üîπ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Request-scoped` –Ω–∞–¥–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ **—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø–∞–º—è—Ç—å**.

---

‚ùì **3. –ö–∞–∫ –≤ Nest.js —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ–∂–º–æ–¥—É–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±–µ–∑ –∂–µ—Å—Ç–∫–æ–π —Å–≤—è–∑–∏?**  
üí° **–û—Ç–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Custom Providers –∏ Aliases**  
üìå **–ü—Ä–∏–º–µ—Ä:**  
```typescript
@Module({
  providers: [{ provide: 'USER_REPO', useClass: UsersRepository }],
  exports: ['USER_REPO'],
})
export class UsersModule {}

@Module({
  imports: [UsersModule],
  providers: [{ provide: 'USER_REPO', useExisting: UsersRepository }],
})
export class OrdersModule {}
```
üîπ –¢–µ–ø–µ—Ä—å **OrdersModule** –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –Ω–∞–ø—Ä—è–º—É—é –æ—Ç UsersModule, –Ω–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `USER_REPO`.

---

‚ùì **4. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Guards, Interceptors –∏ Middleware?**  
üí° **–û—Ç–≤–µ—Ç:**  
- **Guards (`@UseGuards()`)** ‚Üí –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—Ç **–¥–æ—Å—Ç—É–ø –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º** (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è).  
- **Interceptors (`@UseInterceptors()`)** ‚Üí –ú–æ–≥—É—Ç **–∏–∑–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã** (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ).  
- **Middleware (`app.use()`)** ‚Üí **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç** –∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–¥ –∏—Ö –ø–æ–ø–∞–¥–∞–Ω–∏–µ–º –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.  

üìå **–ü—Ä–∏–º–µ—Ä Guard (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–æ–∫–µ–Ω—É)**  
```typescript
@Injectable()
export class AuthGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest();
    return request.headers.authorization === 'Bearer VALID_TOKEN';
  }
}
```
üìå **–ü—Ä–∏–º–µ—Ä Interceptor (–∏–∑–º–µ–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞)**  
```typescript
@Injectable()
export class TransformInterceptor<T> implements NestInterceptor<T, Response> {
  intercept(context: ExecutionContext, next: CallHandler<T>): Observable<Response> {
    return next.handle().pipe(map(data => ({ success: true, data })));
  }
}
```

---

‚ùì **5. –ö–∞–∫ –≤ Nest.js —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?**  
üí° **–û—Ç–≤–µ—Ç:**  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **@nestjs/microservices** —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞–º–∏ **TCP, Redis, RabbitMQ, Kafka**.  
üìå **–ü—Ä–∏–º–µ—Ä –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ —Å Redis:**  
```typescript
import { NestFactory } from '@nestjs/core';
import { MicroserviceOptions, Transport } from '@nestjs/microservices';

async function bootstrap() {
  const app = await NestFactory.createMicroservice<MicroserviceOptions>(
    AppModule,
    { transport: Transport.REDIS, options: { host: 'localhost', port: 6379 } },
  );
  await app.listen();
}
bootstrap();
```
üîπ –¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ **Redis**, –∞ –Ω–µ HTTP.

---

### **–í—ã–≤–æ–¥**
Nest.js –Ω–µ –ø—Ä–æ—Å—Ç–æ —É–ª—É—á—à–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ –∏ —Ä–µ—à–∞–µ—Ç –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ã—á–Ω–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.  

## **Dependency Injection (DI) –≤ Nest.js**  

**Dependency Injection (DI)** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏** –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏, —Å–Ω–∏–∂–∞—è –∏—Ö —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∏ —É–ª—É—á—à–∞—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å.  

### **üîπ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DI –≤ Nest.js?**  

1. **Nest.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Inversion of Control (IoC) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**  
   - IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **—Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –∫–ª–∞—Å—Å–æ–≤**, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—è –∏—Ö –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã.  

2. **–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –º–æ–¥—É–ª–µ**  
   - Nest.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –≤–Ω–µ–¥—Ä—è–µ—Ç –∏—Ö –≤ –Ω—É–∂–Ω—ã–µ –º–µ—Å—Ç–∞**.  

3. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@Injectable()`, `@Inject()`**  
   - `@Injectable()` –ø–æ–º–µ—á–∞–µ—Ç –∫–ª–∞—Å—Å –∫–∞–∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä.  
   - `@Inject()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —è–≤–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.  

---

## **üîπ –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä DI –≤ Nest.js**  

üìå **–°–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–Ω–µ–¥—Ä–µ–Ω –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä:**  
```typescript
import { Injectable } from '@nestjs/common';

@Injectable()
export class UsersService {
  getUsers() {
    return [{ id: 1, name: 'Alice' }];
  }
}
```

üìå **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å:**  
```typescript
import { Controller, Get } from '@nestjs/common';
import { UsersService } from './users.service';

@Controller('users')
export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  @Get()
  getAllUsers() {
    return this.usersService.getUsers();
  }
}
```

üìå **–ú–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å:**  
```typescript
import { Module } from '@nestjs/common';
import { UsersController } from './users.controller';
import { UsersService } from './users.service';

@Module({
  controllers: [UsersController],
  providers: [UsersService],  // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä
  exports: [UsersService],    // –î–µ–ª–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π
})
export class UsersModule {}
```

–¢–µ–ø–µ—Ä—å Nest.js **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä `UsersService`** –∏ –ø–µ—Ä–µ–¥–∞—Å—Ç –µ–≥–æ –≤ `UsersController`.  

---

## **üîπ Singleton vs Request-scoped –≤ DI**  

üìå **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ Nest.js ‚Äî —Å–∏–Ω–≥–ª—Ç–æ–Ω—ã (–æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ).**  
üìå –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä **Request-scoped**, —á—Ç–æ–±—ã –æ–Ω —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.  

```typescript
import { Injectable, Scope } from '@nestjs/common';

@Injectable({ scope: Scope.REQUEST })
export class RequestScopedService {
  constructor() {
    console.log('–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä RequestScopedService');
  }
}
```
üîπ **–ú–∏–Ω—É—Å:** —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ø–∞–º—è—Ç—å, —Ç–∞–∫ –∫–∞–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –∫–∞–∂–¥—ã–π HTTP-–∑–∞–ø—Ä–æ—Å.  

---

## **üîπ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å —Ç–æ–∫–µ–Ω–∞–º–∏ (Custom Providers)**  

–í–º–µ—Å—Ç–æ –∫–ª–∞—Å—Å–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ–∫–µ–Ω—ã**:  

```typescript
import { Injectable, Inject } from '@nestjs/common';

@Injectable()
export class UsersService {
  constructor(@Inject('USER_REPO') private userRepo) {}
}
```

–ê –≤ –º–æ–¥—É–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω:  
```typescript
@Module({
  providers: [
    {
      provide: 'USER_REPO',
      useClass: UsersRepository,
    },
  ],
  exports: ['USER_REPO'],
})
export class UsersModule {}
```
üîπ –¢–µ–ø–µ—Ä—å `UsersService` **–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω** –Ω–∞–ø—Ä—è–º—É—é –∫ `UsersRepository`, –∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—é**.

---

## **üîπ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**  

–ï—Å–ª–∏ `UsersService` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `AuthService`, –∞ `AuthService` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `UsersService`, –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç **—Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**.  

üìå **–†–µ—à–µ–Ω–∏–µ:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `forwardRef()`.  

```typescript
@Module({
  providers: [UsersService, AuthService],
})
export class AuthModule {}

@Injectable()
export class UsersService {
  constructor(@Inject(forwardRef(() => AuthService)) private authService: AuthService) {}
}
```

---

### **‚úÖ –ò—Ç–æ–≥**
- Nest.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.  
- **–í—Å–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî Singleton.** –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏—Ö **Request-scoped**.  
- **DI –≤ Nest.js** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å **—Ç–æ–∫–µ–Ω–∞–º–∏**, **—Ñ–∞–±—Ä–∏—á–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏** –∏ **—Ñ–æ—Ä–≤–∞—Ä–¥–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏**.  

üí° –ì–æ—Ç–æ–≤ —Ä–∞–∑–æ–±—Ä–∞—Ç—å **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏** –∏–ª–∏ **–≥–ª—É–±–æ–∫–∏–µ –Ω—é–∞–Ω—Å—ã** DI! üöÄ

## **–ö–∞–∫ Nest.js —Ä–µ–∞–ª–∏–∑—É–µ—Ç IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Inversion of Control Container)**  

Nest.js **—Ä–µ–∞–ª–∏–∑—É–µ—Ç IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ö–∞–Ω–∏–∑–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ **–º–æ–¥—É–ª—è—Ö, —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ (Reflect Metadata) –∏ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**.  

### **üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ Nest.js**  

1. **Container (DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)** ‚Üí –•—Ä–∞–Ω–∏—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.  
2. **ModuleRef** ‚Üí –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∫–ª–∞—Å—Å–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.  
3. **Reflect Metadata** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∫–ª–∞—Å—Å–æ–≤ –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.  

---

## **üîπ –†–∞–∑–±–æ—Ä –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**  

### **1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π**  
–ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, Nest.js **—Å–∫–∞–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏** –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∏—Ö.  

üìå **–ü—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è:**  
```typescript
@Module({
  providers: [UsersService],
  exports: [UsersService],
})
export class UsersModule {}
```
üîπ Nest.js **—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å** –≤ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –≤—Å–µ –µ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã.  

---

### **2. –ü–æ–∏—Å–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Reflect Metadata**  
Nest.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã** –∏ **Reflect Metadata API**, —á—Ç–æ–±—ã –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.  

üìå **–ö–∞–∫ Nest.js –ø–æ–Ω–∏–º–∞–µ—Ç, –∫–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω—É–∂–Ω—ã?**  
```typescript
import { Injectable } from '@nestjs/common';

@Injectable()
export class UsersService {
  constructor(private readonly authService: AuthService) {}
}
```
üîπ –í–æ –≤—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ Nest.js –≤—ã–∑—ã–≤–∞–µ—Ç:  
```typescript
Reflect.getMetadata('design:paramtypes', UsersService);
```
üí° –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–≤—ã—Ç–∞—â–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞**, –∞ –∑–Ω–∞—á–∏—Ç ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

---

### **3. –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ —á–µ—Ä–µ–∑ ModuleRef**  
–ö–æ–≥–¥–∞ `UsersService` –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ, Nest.js –≤—ã–∑—ã–≤–∞–µ—Ç `ModuleRef.get(UsersService)`, —á—Ç–æ–±—ã:  
- –ù–∞–π—Ç–∏ `UsersService` –≤ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.  
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —É –Ω–µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`AuthService`).  
- –°–æ–∑–¥–∞—Ç—å `AuthService`, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.  
- –í–Ω–µ–¥—Ä–∏—Ç—å `AuthService` –≤ `UsersService`.  

üìå **–ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∫–æ–¥ DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ Nest.js):**  
```typescript
class ModuleRef {
  private instances = new Map();

  get<T>(provider: Type<T>): T {
    if (!this.instances.has(provider)) {
      const dependencies = Reflect.getMetadata('design:paramtypes', provider) || [];
      const dependenciesInstances = dependencies.map(dep => this.get(dep));
      const instance = new provider(...dependenciesInstances);
      this.instances.set(provider, instance);
    }
    return this.instances.get(provider);
  }
}
```
üîπ –≠—Ç–æ **—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Singleton**, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑** –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `instances`.

---

### **4. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**  
–ï—Å–ª–∏ `AuthService` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `UsersService`, –∞ `UsersService` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `AuthService`, —Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **–Ω–µ —Å–º–æ–∂–µ—Ç —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞—Ç—å –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞**.  

üìå **–ö–∞–∫ Nest.js —Ä–µ—à–∞–µ—Ç —ç—Ç–æ?**  
- –°–æ–∑–¥–∞–µ—Ç **–ø—É—Å—Ç—ã–µ –∑–∞–≥–ª—É—à–∫–∏ (`Proxy`)** –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.  
- –ü–æ–∑–∂–µ –∑–∞–º–µ–Ω—è–µ—Ç –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã.  
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `forwardRef()` –¥–ª—è —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.  

üìå **–ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ Nest.js?**  
```typescript
class ModuleRef {
  private instances = new Map();
  private proxies = new Map();

  get<T>(provider: Type<T>): T {
    if (this.instances.has(provider)) return this.instances.get(provider);
    
    if (this.proxies.has(provider)) return this.proxies.get(provider);

    const instance = new Proxy({}, {
      get: (_, prop) => this.get(provider)[prop]
    });

    this.proxies.set(provider, instance);

    const dependencies = Reflect.getMetadata('design:paramtypes', provider) || [];
    const dependenciesInstances = dependencies.map(dep => this.get(dep));

    const realInstance = new provider(...dependenciesInstances);
    this.instances.set(provider, realInstance);
    this.proxies.set(provider, realInstance);

    return realInstance;
  }
}
```
üîπ Nest.js —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ—Ç **–ø—Ä–æ–∫—Å–∏**, –∞ –ø–æ—Ç–æ–º **–∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –æ–±—ä–µ–∫—Ç**.

---

### **5. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ Hook'–∏**  
Nest.js –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ **OnModuleInit, OnApplicationShutdown** –∏ –¥—Ä—É–≥–∏–µ —Ö—É–∫–∏.  

üìå **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?**  
```typescript
@Injectable()
export class MyService implements OnModuleInit, OnApplicationShutdown {
  onModuleInit() {
    console.log('MyService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!');
  }

  onApplicationShutdown() {
    console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è!');
  }
}
```
üîπ Nest.js –≤—ã–∑—ã–≤–∞–µ—Ç —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –≤ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è**, —É–ø—Ä–∞–≤–ª—è—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤.  

---

## **üîπ –ò—Ç–æ–≥: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç IoC-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ Nest.js?**  
1. **–°–∫–∞–Ω–∏—Ä—É–µ—Ç –º–æ–¥—É–ª–∏** –∏ **—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**.  
2. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç Reflect Metadata** –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.  
3. **–°–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ** –∏ –∫–µ—à–∏—Ä—É–µ—Ç –∏—Ö.  
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** —á–µ—Ä–µ–∑ `forwardRef()` –∏ –ø—Ä–æ–∫—Å–∏-–æ–±—ä–µ–∫—Ç—ã.  
5. **–ü–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Ä–≤–∏—Å–æ–≤** —á–µ—Ä–µ–∑ —Ö—É–∫–∏.  

üî• **–í–æ–ø—Ä–æ—Å—ã? –ì–æ—Ç–æ–≤ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏! üöÄ**
